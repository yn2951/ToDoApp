<% if params[:id] %>
  <% @topic = Topic.find_by(id: params[:id]) %>
<% end %>

<div class="new-topic-wrapper">
  <div class="container">
    <div class="row">
      <%= form_for @topic do |f| %>
        <div class="form-group col-md-6 col-md-offset-3">
          <%= f.label :タイトル： %>
          <%= f.text_area :title, class: 'form-control'%>
        </div>

        <div class="form-group col-md-6 col-md-offset-3">
          <%= f.label :説明： %>
          <%= f.text_area :description, class: 'form-control' %>
        </div>

        <div class="form-group col-md-6 col-md-offset-3">
          <%= f.label :優先度： %>
          <%= f.select :priority, [["低", "低"], ["高", "高"]] %>
        </div>

        <% if params[:id] %>
          <div class="form-group col-md-6 col-md-offset-3">
            <span class="sentence">
              ステータス：<%= @topic.status %>
            </span>
          </div>
        <% end %>

        <div class="form-group col-md-6 col-md-offset-3">
          <%= f.label :終了予定日： %>
          <%= f.date_field :schedule_date %>
        </div>

        <% if @topic.start_date != nil %>
          <div class="form-group col-md-6 col-md-offset-3">
            <span class="sentence">
              作業開始日：<%= @topic.start_date %>
            </span>
          </div>
        <% end %>

        <% if @topic.end_date != nil %>
          <div class="form-group col-md-6 col-md-offset-3">
            <span class="sentence">
              作業終了日：<%= @topic.end_date %>
            </span>
          </div>
        <% end %>

        <div class="form-group">
          <%= link_to date_update_path(id: @topic.id), method: :update do %>
            <% if @topic.status == "未着手" && params[:id] && logged_in? %>
              <button type="button" name="button" class="btn btn-default start-end col-md-2 col-md-offset-5">開始</button>
            <% elsif @topic.status == "処理中" && logged_in? %>
              <button type="button" name="button" class="btn btn-default start-end col-md-2 col-md-offset-5">終了</button>
            <% end %>
          <% end %>
        </div>

        <% if logged_in? && params[:id] %>
          <%= f.submit '編集内容を保存する', class: 'btn btn-default col-md-2 col-md-offset-5' %>
        <% elsif logged_in? %>
          <%= f.submit '作成内容を保存する', class: 'btn btn-default col-md-2 col-md-offset-5' %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
